<!DOCTYPE html>
<html lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8" />
<title>Консоль</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
<meta name=generator content="ENSI.Console" />
<link rel="apple-touch-icon" sizes="180x180" href="ico/apple-touch-favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="ico/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="ico/favicon-16x16.png">
<link rel="stylesheet" href="style.css">
<script defer src="js/econsole.js"></script>
<script defer src="js/plotly-2.35.2.min.js"></script>
<script defer src="js/plotly-locale-ru-latest.js"></script>
</head><body>

<!-- Header -->
<div id="head-bar-cnt"><div id="head-bar">
</div></div>

<div id="wrkspace-div-cnt"><div id="wrkspace-div">
	<!-- left menu pane -->
	<div class="menu-v-pane-cnt">
		<div class="menu-v-logo"></div>
		<div id="menu-v-pane"><!-- menu content -->
		</div>
	</div>
	<!-- user main workspace -->
	<div class="workspace-pane">
		<h1>Закупки по категориям</h1>
		<div class="ui-pane-grouper">
			<div class="ui-pane"><h1>Объем к прошлому году</h1><div id="graph1"></div></div>
			<div class="ui-pane"><h1>Исполнение ГКПЗ (по категориям)</h1><div id="graph2"></div></div>
		</div>
	</div>

</div></div>

<!-- Footer -->
<div id="foot-bar-cnt"><div id="foot-bar">
</div></div>

<script>
"use strinct";
const data1 = [{
  values: [530, 670],
  labels: ['2023г.', '2024г.'],
  marker: {colors: ['rgb(222,241,238)', 'rgb(0,121,194)']},
  name: 'объём', hoverinfo: 'label+value+percent',
  hole: .65, type: 'pie'
}]
const layout1 = {
  // title: { text: 'По отношению к прошлому году', position:'top left', font: {size:12, weight: 'bold'}},
  // annotations: [
  //   {
  //     font: { size: 10 },
  //     showarrow: false,
  //     text: `${data1[0].values.reduce((partialSum, a) => partialSum + a, 0)} закупок`,
  //     x: 0.1, y: 0.5
  //   }
  // ],
  height: 220, width: 220, paper_bgcolor: '#fafafa',
  showlegend: true, legend: {orientation: 'h', side: 'bottom'},
  margin: { l: 3, r: 3, b: 3, t: 20, pad: 50 },
  // grid: {rows: 1, columns: 2}
};
const data2_proc = [[83.2, 73.4, 83.5], [9.5, 13.5, 5.2], [7.3, 13.1, 11.3]]
const data2 = [{
	x: ['ДЗО-1','ДЗО-2','ДЗО-3'],
	y: data2_proc[0], name: 'МТР', type: 'bar',
	text: data2_proc[0].map((e) => e + '%'), textposition: 'auto',
	marker: {color: '#0079c2'},
},{
	x: ['ДЗО-1','ДЗО-2','ДЗО-3'],
	y: data2_proc[1], name: 'услуги', type: 'bar',
	text: data2_proc[1].map((e) => e + '%'), textposition: 'auto',
	marker: {color: '#69bdf1'},
},{
	x: ['ДЗО-1','ДЗО-2','ДЗО-3'],
	y: data2_proc[2], name: 'работы', type: 'bar',
	text: data2_proc[2].map((e) => e + '%'), textposition: 'auto',
	marker: {color: '#def1ee'},
}];
const layout2 = {
	barmode: 'stack', hoverinfo: 'label+text+value',
	legend: {orientation: 'h', side: 'bottom'},
	paper_bgcolor: '#fafafa', graph_bgcolor: '#fafafa',
	margin: {t: 20}, width: 620,
	// barcornerradius: 15,
};

const pl_config = {locale: 'ru', displaylogo: false, responsive: true, displayModeBar: true};
window.addEventListener('load', function () {
	Plotly.newPlot('graph1', data1, layout1, pl_config);
	Plotly.newPlot('graph2', data2, layout2, pl_config);
});

</script>
</body></html>